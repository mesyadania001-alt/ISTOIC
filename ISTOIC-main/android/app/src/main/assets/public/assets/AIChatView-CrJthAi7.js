import{j as e,aB as Pe,X as ge,aj as $e,G as He,M as rt,aC as nt,a as ce,B as X,az as ke,aD as it,aE as lt,J as ot,d as ct,aF as dt,a9 as Ce,C as Ue,Z as oe,aG as Fe,O as re,u as Ve,aH as Be,D as Ye,aI as xt,T as Ee,h as We,aJ as Ae,ak as ut,aK as ht,V as Se,aL as Ie,aM as mt,aN as bt,a8 as Ke,f as Oe,aO as pt,aP as gt,aQ as ft,ah as qe,ai as Qe,A as wt,aR as jt,aS as Nt,aT as vt,o as kt,aU as yt,aV as Et,n as Xe,r as St,U as It,aW as Ct,aX as At,s as Je,w as Ze,x as et,ao as Tt,R as zt,aY as tt,at as Rt,_ as _t,aZ as Dt,a1 as Ot,ag as Mt,a_ as Gt}from"./vendor-ui-BZMtAjw3.js";import{r as n,R as ne}from"./vendor-react-BVD7n4_Z.js";import{d as K,U as q,F as Q,u as Te,M as le,K as Lt,a as at,g as Pt,T as Me,b as $t,c as Ht,e as Ut}from"./index-BuNBQ-bW.js";import{o as Ft}from"./imageOptimizer-20RPlnSI.js";import"./vendor-ai-CXmbpsrq.js";import"./vendor-firebase-Zql6DR9P.js";const Vt=t=>{const a=new Date(t),s=Math.floor((new Date().getTime()-a.getTime())/1e3);return s<60?"Just now":s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:s<604800?`${Math.floor(s/86400)}d ago`:a.toLocaleDateString()},Bt=({isOpen:t,onClose:a,threads:r,activeThreadId:s,onSelectThread:l,onDeleteThread:u,onRenameThread:c,onTogglePin:k,onNewChat:g})=>{const[w,I]=n.useState(""),[E,C]=n.useState(null),[D,d]=n.useState(""),y=n.useMemo(()=>r.filter(h=>h.title.toLowerCase().includes(w.toLowerCase())||h.messages.some(i=>typeof i.text=="string"&&i.text.toLowerCase().includes(w.toLowerCase()))).sort((h,i)=>{if(h.isPinned&&!i.isPinned)return-1;if(!h.isPinned&&i.isPinned)return 1;const f=new Date(h.updated||0).getTime();return new Date(i.updated||0).getTime()-f}),[r,w]),{flatData:b,groupCounts:T,groupNames:v}=n.useMemo(()=>{const h={PINNED:[],TODAY:[],YESTERDAY:[],"PREVIOUS 7 DAYS":[],"ARCHIVED LOGS":[]},i=new Date;i.setHours(0,0,0,0);const f=new Date(i);f.setDate(f.getDate()-1);const A=new Date(i);A.setDate(A.getDate()-7),y.forEach(p=>{if(p.isPinned){h.PINNED.push(p);return}const x=new Date(p.updated||0);x>=i?h.TODAY.push(p):x>=f?h.YESTERDAY.push(p):x>=A?h["PREVIOUS 7 DAYS"].push(p):h["ARCHIVED LOGS"].push(p)});const z=[],m=[],j=[];return["PINNED","TODAY","YESTERDAY","PREVIOUS 7 DAYS","ARCHIVED LOGS"].forEach(p=>{h[p].length>0&&(z.push(...h[p]),m.push(h[p].length),j.push(p))}),{flatData:z,groupCounts:m,groupNames:j}},[y]),S=(h,i)=>{h.stopPropagation(),C(i.id),d(i.title)},R=h=>{h==null||h.preventDefault(),E&&D.trim()&&c(E,D.trim().toUpperCase()),C(null)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 bg-black/40 backdrop-blur-[2px] z-[2000] transition-opacity duration-500 ease-out ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:a}),e.jsxs("div",{className:`
        fixed inset-y-0 right-0 w-[85%] md:w-[380px] 
        bg-white/95 dark:bg-[#09090b]/95 backdrop-blur-2xl 
        border-l border-black/5 dark:border-white/10 
        z-[2010] shadow-[-20px_0_50px_rgba(0,0,0,0.1)] dark:shadow-[-20px_0_50px_rgba(0,0,0,0.5)]
        transform transition-transform duration-500 cubic-bezier(0.22, 1, 0.36, 1)
        flex flex-col
        ${t?"translate-x-0":"translate-x-full"}
      `,children:[e.jsxs("div",{className:"p-6 border-b border-black/5 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02] shrink-0 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-accent/10 rounded-lg text-accent border border-accent/20",children:e.jsx(Pe,{size:18,strokeWidth:2.5})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-[0.2em] text-black dark:text-white leading-none",children:"NEURAL_LOGS"}),e.jsxs("p",{className:"text-[9px] text-neutral-500 font-bold uppercase tracking-widest mt-1",children:["Total ",r.length," Sessions"]})]})]}),e.jsx("button",{onClick:a,className:"p-2 text-neutral-400 hover:text-black dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/10 rounded-full transition-all",children:e.jsx(ge,{size:20})})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>{g(),a()},className:"flex-1 h-12 bg-black dark:bg-white text-white dark:text-black rounded-xl flex items-center justify-center gap-2 font-black uppercase text-[10px] tracking-[0.2em] hover:scale-[1.02] active:scale-95 transition-all shadow-lg",children:[e.jsx($e,{size:16,strokeWidth:3})," NEW_SESSION"]})}),e.jsxs("div",{className:"relative group",children:[e.jsx(He,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-400 group-focus-within:text-accent transition-colors",size:14}),e.jsx("input",{type:"text",placeholder:"SEARCH_LOGS...",value:w,onChange:h=>I(h.target.value),className:"w-full bg-white dark:bg-black/20 border border-black/5 dark:border-white/10 focus:border-accent/50 rounded-xl py-3 pl-10 pr-4 text-[10px] tech-mono font-bold uppercase tracking-widest text-black dark:text-white focus:outline-none transition-all placeholder:text-neutral-400 dark:placeholder:text-neutral-600"})]})]}),e.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:b.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-neutral-400 opacity-50 space-y-4",children:[e.jsx(rt,{size:48,strokeWidth:1}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"NO_LOGS_FOUND"})]}):e.jsx(nt,{style:{height:"100%",width:"100%"},groupCounts:T,className:"custom-scroll",groupContent:h=>{const i=v[h];return e.jsxs("div",{className:"flex items-center gap-3 px-6 py-2 bg-white/95 dark:bg-[#09090b]/95 backdrop-blur-xl border-b border-black/5 dark:border-white/5 z-10 sticky top-0",children:[e.jsxs("span",{className:`text-[8px] font-black tracking-[0.3em] uppercase ${i==="PINNED"?"text-accent flex items-center gap-1":"text-neutral-500"}`,children:[i==="PINNED"&&e.jsx(ke,{size:10,className:"inline"}),i]}),e.jsx("div",{className:"h-[1px] flex-1 bg-black/10 dark:bg-white/10"})]})},itemContent:h=>{const i=b[h],f=s===i.id,A=E===i.id,z=i.persona==="hanisah"?ce:X;return e.jsx("div",{className:"px-4 py-1",children:e.jsxs("div",{onClick:()=>{A||(l(i.id),window.innerWidth<768&&a())},className:`
                              group relative p-3.5 rounded-[16px] border transition-all duration-300 cursor-pointer overflow-hidden
                              ${f?"bg-white dark:bg-white/[0.08] border-accent/40 shadow-lg shadow-accent/5 ring-1 ring-accent/20":"bg-transparent border-transparent hover:bg-zinc-100 dark:hover:bg-white/[0.03] hover:border-black/5 dark:hover:border-white/5"}
                            `,children:[f&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-accent shadow-[0_0_10px_var(--accent-color)]"}),e.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[e.jsx("div",{className:`
                                w-10 h-10 rounded-xl flex items-center justify-center shrink-0 transition-all
                                ${f?"bg-accent text-black shadow-md":"bg-zinc-200 dark:bg-white/5 text-neutral-400 group-hover:text-black dark:group-hover:text-white"}
                              `,children:e.jsx(z,{size:18})}),e.jsx("div",{className:"flex-1 min-w-0",children:A?e.jsx("form",{onSubmit:R,className:"flex items-center gap-2",onClick:m=>m.stopPropagation(),children:e.jsx("input",{autoFocus:!0,value:D,onChange:m=>d(m.target.value),onBlur:R,className:"bg-transparent border-b border-accent w-full text-[11px] font-black uppercase outline-none py-1 text-black dark:text-white"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:`text-[11px] font-bold uppercase tracking-tight truncate leading-tight flex-1 pr-2 ${f?"text-black dark:text-white":"text-neutral-600 dark:text-neutral-400 group-hover:text-black dark:group-hover:text-white transition-colors"}`,children:i.title}),i.isPinned&&e.jsx(ke,{size:10,className:"text-accent shrink-0"})]}),e.jsxs("p",{className:"text-[9px] tech-mono text-neutral-400 truncate flex items-center gap-2",children:[e.jsx("span",{children:Vt(i.updated)}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-neutral-600"}),e.jsxs("span",{children:[i.messages.length," MSGS"]})]})]})}),!A&&e.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity gap-1",children:[e.jsx("button",{onClick:m=>{m.stopPropagation(),k(i.id)},className:`p-1.5 rounded-lg transition-all ${i.isPinned?"text-accent hover:bg-accent/10":"text-neutral-400 hover:text-accent hover:bg-accent/10"}`,title:i.isPinned?"Unpin":"Pin to Top",children:i.isPinned?e.jsx(it,{size:14}):e.jsx(ke,{size:14})}),e.jsx("button",{onClick:m=>S(m,i),className:"p-1.5 text-neutral-400 hover:text-accent hover:bg-accent/10 rounded-lg transition-all",title:"Rename",children:e.jsx(lt,{size:14})}),e.jsx("button",{onClick:m=>{m.stopPropagation(),K.logAction(q.CHAT_BTN_DELETE,Q.CHAT_DELETE_SESSION,i.id)&&window.confirm(`âš ï¸ DELETE SESSION

Delete "${i.title}" permanently? This cannot be undone.`)&&u(i.id)},className:"p-1.5 text-neutral-400 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-all",title:"Delete",children:e.jsx(ot,{size:14})})]}),f&&!A&&e.jsx(ct,{size:16,className:"text-accent group-hover:opacity-0 transition-opacity absolute right-4"})]})]})})}})}),e.jsx("div",{className:"p-4 border-t border-black/5 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02] text-center shrink-0",children:e.jsxs("p",{className:"text-[8px] tech-mono text-neutral-400 uppercase tracking-widest opacity-60",children:["LOCAL_STORAGE_PERSISTENCE // ",s?"ACTIVE":"IDLE"]})})]})]})},Yt=ne.memo(({label:t,value:a,max:r,color:s})=>{const u=Math.round(a/r*12);return e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[7px] font-black text-neutral-500 uppercase tracking-widest",children:t}),e.jsxs("span",{className:`text-[8px] font-mono font-bold ${s}`,children:[a,"/",r]})]}),e.jsx("div",{className:"flex gap-0.5 h-1.5",children:Array.from({length:12}).map((c,k)=>e.jsx("div",{className:`flex-1 rounded-[1px] transition-all duration-500 ${k<u?s.replace("text-","bg-"):"bg-white/5"} ${k<u?"shadow-[0_0_5px_currentColor]":""}`},k))})]})}),Wt=ne.memo(({status:t,cooldown:a})=>t==="HEALTHY"?e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded bg-emerald-500/5 border border-emerald-500/20 text-emerald-500",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse shadow-[0_0_8px_currentColor]"}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-wider",children:"ONLINE"})]}):t==="COOLDOWN"?e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded bg-amber-500/5 border border-amber-500/20 text-amber-500",children:[e.jsx(Ee,{size:8}),e.jsxs("span",{className:"text-[7px] font-black uppercase tracking-wider",children:["COOLING (",a,"m)"]})]}):e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded bg-red-500/5 border border-red-500/20 text-red-500",children:[e.jsx(We,{size:8}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-wider",children:"OFFLINE"})]})),Kt=({isOpen:t,onClose:a,activeModelId:r,onSelectModel:s})=>{var D;const[l,u]=n.useState("AUTO"),[c,k]=n.useState([]),{features:g}=Te(),[w,I]=n.useState([]);n.useRef(null),n.useEffect(()=>{if(t){const d=()=>k(Lt.getAllProviderStatuses());d();let y={};try{const S=localStorage.getItem("provider_visibility");S&&(y=JSON.parse(S))}catch{}const b=S=>y[S]!==!1,T=["AUTO"];b("GEMINI")&&T.push("GOOGLE"),b("MISTRAL")&&T.push("MISTRAL"),b("GROQ")&&T.push("GROQ"),b("OPENAI")&&T.push("OPENAI"),b("DEEPSEEK")&&T.push("DEEPSEEK"),I(T),T.includes(l)||u(T[0]);let v=null;return g.AUTO_DIAGNOSTICS&&(v=setInterval(d,2e3)),()=>{v&&clearInterval(v)}}},[t,g.AUTO_DIAGNOSTICS]);const E={AUTO:{icon:e.jsx(Ve,{size:16}),label:"AUTO",sub:"OMNI-RACE",desc:"Parallel execution. The fastest engine wins.",accent:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/20",models:le.filter(d=>d.id==="auto-best")},GOOGLE:{icon:e.jsx(re,{size:16}),label:"GEMINI",sub:"GOOGLE",desc:"Native Multimodal Context Windows (2M+ Tokens).",accent:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/20",models:le.filter(d=>d.provider==="GEMINI"&&d.id!=="auto-best")},MISTRAL:{icon:e.jsx(Fe,{size:16}),label:"MISTRAL",sub:"FRENCH AI",desc:"Top-tier open weights models from France.",accent:"text-yellow-400",bg:"bg-yellow-500/10",border:"border-yellow-500/20",models:le.filter(d=>d.provider==="MISTRAL")},GROQ:{icon:e.jsx(oe,{size:16}),label:"GROQ",sub:"LPU SPEED",desc:"Ultra-Low Latency Inference running Llama.",accent:"text-orange-400",bg:"bg-orange-500/10",border:"border-orange-500/20",models:le.filter(d=>d.provider==="GROQ")},OPENAI:{icon:e.jsx(Ue,{size:16}),label:"OPENAI",sub:"STANDARD",desc:"Industry standard models (GPT-4o).",accent:"text-green-400",bg:"bg-green-500/10",border:"border-green-500/20",models:le.filter(d=>d.provider==="OPENAI")},DEEPSEEK:{icon:e.jsx(X,{size:16}),label:"DEEPSEEK",sub:"REASONING",desc:"Advanced reasoning (R1) and coding.",accent:"text-indigo-400",bg:"bg-indigo-500/10",border:"border-indigo-500/20",models:le.filter(d=>d.provider==="DEEPSEEK")}},C=E[l];return n.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),t?e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-end md:items-center justify-center p-0 md:p-4 font-sans h-full overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md transition-opacity duration-300 animate-fade-in transform-gpu",onClick:a}),e.jsxs("div",{className:"relative z-10 w-full md:max-w-5xl h-[92vh] md:h-[85vh] bg-[#050505] rounded-t-[32px] md:rounded-[24px] border-t md:border border-white/10 shadow-[0_0_50px_rgba(0,0,0,0.8)] flex flex-col overflow-hidden ring-1 ring-white/5 animate-slide-up transform-gpu transition-all duration-300 ease-out",style:{willChange:"transform, opacity"},children:[e.jsxs("div",{className:"h-16 md:h-14 border-b border-white/5 bg-white/[0.02] flex items-center justify-between px-6 shrink-0 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center border border-white/5 shadow-inner",children:e.jsx(dt,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-white leading-none",children:"MODEL_SELECTION"}),e.jsx("p",{className:"text-[8px] text-neutral-500 font-mono uppercase tracking-widest mt-1",children:"Architecture Selection"})]})]}),e.jsx("button",{onClick:a,className:"w-8 h-8 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center text-neutral-400 hover:text-white transition-all border border-white/5 active:scale-95",children:e.jsx(ge,{size:16})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row flex-1 overflow-hidden",children:[e.jsx("div",{className:"w-full md:w-64 bg-[#08080a] border-b md:border-b-0 md:border-r border-white/5 flex flex-row md:flex-col p-2 gap-1 overflow-x-auto md:overflow-y-auto no-scrollbar shrink-0",children:w.map(d=>{var h;const y=E[d],b=l===d,T=((h=y.models[0])==null?void 0:h.provider)||"UNKNOWN",v=c.find(i=>i.id===T),S=d==="AUTO"?g.OMNI_RACE:(v==null?void 0:v.status)==="HEALTHY",R=d==="AUTO"&&!g.OMNI_RACE;return e.jsxs("button",{onClick:()=>!R&&u(d),disabled:R,className:`
                                relative p-3 rounded-xl flex md:w-full items-center gap-3 transition-all duration-200 group overflow-hidden border shrink-0 active:scale-95
                                ${b?"bg-white/5 border-white/10 shadow-inner":"bg-transparent border-transparent hover:bg-white/[0.02] hover:border-white/5"}
                                ${R?"opacity-40 cursor-not-allowed grayscale":""}
                            `,children:[b&&e.jsx("div",{className:`absolute left-0 bottom-0 md:top-0 md:bottom-0 h-0.5 md:h-auto md:w-0.5 w-full ${y.bg.replace("/10","")} shadow-[0_0_10px_currentColor]`}),e.jsx("div",{className:`
                                w-8 h-8 rounded-lg flex items-center justify-center transition-all shrink-0
                                ${b?`${y.bg} ${y.accent} shadow-[0_0_15px_rgba(0,0,0,0.5)]`:"bg-white/5 text-neutral-500 group-hover:text-white"}
                            `,children:y.icon}),e.jsxs("div",{className:"text-left flex-1 min-w-0 hidden md:block",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-[10px] font-black uppercase tracking-widest ${b?"text-white":"text-neutral-400 group-hover:text-white"}`,children:y.label}),d!=="AUTO"&&e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${S?"bg-emerald-500":"bg-red-500"} ${S?"shadow-[0_0_5px_#10b981]":""}`})]}),e.jsx("span",{className:"text-[8px] font-bold text-neutral-600 uppercase tracking-wide group-hover:text-neutral-500 truncate block",children:y.sub})]})]},d)})}),e.jsxs("div",{className:"flex-1 bg-[#09090b] relative flex flex-col min-h-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-[0.03] pointer-events-none mix-blend-overlay"}),e.jsxs("div",{className:"p-6 md:p-8 pb-4 shrink-0 relative z-10",children:[e.jsx("div",{className:"flex items-end justify-between mb-2",children:e.jsxs("h2",{className:"text-3xl md:text-4xl font-black italic tracking-tighter uppercase text-white drop-shadow-md",children:[C.label," ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-white to-white/20 text-xl md:text-2xl not-italic tracking-widest opacity-50",children:"// MODULE"})]})}),e.jsx("p",{className:"text-[10px] text-neutral-400 font-mono uppercase tracking-[0.2em] border-l-2 border-white/10 pl-3 leading-relaxed max-w-lg",children:C.desc})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scroll p-4 md:p-8 pt-0 relative z-10 pb-20",children:e.jsx("div",{className:"grid grid-cols-1 gap-4",children:C.models.map(d=>e.jsx(qt,{model:d,isActive:d.id===r,onClick:()=>{s(d.id)},accent:C.accent,statuses:c},d.id))})}),e.jsxs("div",{className:"h-10 border-t border-white/5 bg-black/40 backdrop-blur-md flex items-center px-6 justify-between shrink-0 absolute bottom-0 left-0 right-0 z-20",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[8px] font-mono text-neutral-600 uppercase tracking-widest",children:[e.jsx(Ce,{size:10}),e.jsxs("span",{children:["Latency: ",((D=c.find(d=>{var y;return d.id===((y=C.models[0])==null?void 0:y.provider)}))==null?void 0:D.status)==="HEALTHY"?"OPTIMAL":"DEGRADED"]})]}),e.jsxs("div",{className:"text-[8px] font-mono text-neutral-700 uppercase tracking-widest hidden md:block",children:[C.models.length," MODELS AVAILABLE"]})]})]})]})]})]}):null},qt=ne.memo(({model:t,isActive:a,onClick:r,accent:s,statuses:l})=>{const u=t.id==="auto-best",c=l.find(w=>w.id===t.provider),k=u?"HEALTHY":(c==null?void 0:c.status)||"OFFLINE",g=a?`border-${s.split("-")[1]}-500/50`:"border-white/5";return e.jsx("button",{onClick:r,className:`
        relative w-full text-left transition-all duration-300 group overflow-hidden
        rounded-[20px] border p-[1px] active:scale-[0.99]
        ${a?"bg-white/[0.03]":"bg-transparent hover:bg-white/[0.01]"}
        ${a?g:"hover:border-white/10"}
      `,children:e.jsxs("div",{className:"bg-[#0c0c0e] rounded-[19px] p-5 relative z-10 h-full flex flex-col md:flex-row gap-6",children:[a&&e.jsx("div",{className:`absolute inset-0 bg-${s.split("-")[1]}-500/5 opacity-[0.03] pointer-events-none`}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[e.jsx("span",{className:`text-base md:text-lg font-black uppercase tracking-tight ${a?"text-white":"text-neutral-300 group-hover:text-white"} transition-colors`,children:t.name}),u&&e.jsx("span",{className:"px-2 py-0.5 rounded bg-emerald-500/10 text-emerald-500 border border-emerald-500/20 text-[8px] font-black tracking-widest uppercase animate-pulse",children:"OMNI-RACE"}),a&&e.jsxs("div",{className:"px-2 py-0.5 rounded bg-white/10 border border-white/10 text-[8px] font-bold uppercase tracking-wider text-white flex items-center gap-1",children:[e.jsx(Be,{size:10,className:s})," ACTIVE"]})]}),e.jsx("p",{className:"text-[10px] text-neutral-500 font-medium leading-relaxed pr-4 line-clamp-2 group-hover:text-neutral-400 transition-colors",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-4 flex-wrap",children:[e.jsx(Wt,{status:k,cooldown:c==null?void 0:c.cooldownRemaining}),t.specs.context!=="AUTO"&&e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded bg-white/5 border border-white/5 text-neutral-400",children:[e.jsx(Ye,{size:10}),e.jsxs("span",{className:"text-[7px] font-black uppercase tracking-wider",children:[t.specs.context," CTX"]})]}),t.specs.speed==="THINKING"&&e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded bg-purple-500/10 border border-purple-500/20 text-purple-400",children:[e.jsx(X,{size:10}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-wider",children:"REASONING"})]})]})]}),e.jsxs("div",{className:"w-full md:w-48 shrink-0 flex flex-row md:flex-col justify-between md:justify-center gap-4 border-t md:border-t-0 md:border-l border-white/5 pt-4 md:pt-0 md:pl-6",children:[e.jsx("div",{className:"flex-1 md:w-full",children:e.jsx(Yt,{label:"INTELLIGENCE",value:t.specs.intelligence,max:10,color:t.specs.intelligence>=9.5?"text-purple-400":"text-blue-400"})}),e.jsxs("div",{className:"flex flex-col gap-1 items-end md:items-start",children:[e.jsx("span",{className:"text-[7px] font-black text-neutral-500 uppercase tracking-widest",children:"VELOCITY"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xt,{size:12,className:t.specs.speed==="INSTANT"?"text-yellow-400":"text-neutral-400"}),e.jsx("span",{className:`text-[9px] font-black uppercase ${t.specs.speed==="INSTANT"?"text-yellow-400":"text-neutral-300"}`,children:t.specs.speed})]})]})]})]})})}),Qt=[{id:"hydra",name:"Hydra Auto",provider:"HYDRA",desc:"Smart routing. Best for generic requests.",icon:e.jsx(ut,{size:16}),quality:"ULTRA",speed:"FAST"},{id:"flux",name:"Flux Standard",provider:"HYDRA",desc:"Balanced detail and prompt adherence.",icon:e.jsx(ht,{size:16}),quality:"HD",speed:"FAST"},{id:"flux-realism",name:"Flux Realism",provider:"HYDRA",desc:"Specialized for photorealistic outputs.",icon:e.jsx(Se,{size:16}),quality:"ULTRA",speed:"FAST"},{id:"flux-anime",name:"Flux Anime",provider:"HYDRA",desc:"Optimized for 2D/Anime style.",icon:e.jsx(Ie,{size:16}),quality:"HD",speed:"FAST"},{id:"flux-3d",name:"Flux 3D",provider:"HYDRA",desc:"For 3D renders and CGI style.",icon:e.jsx(Se,{size:16}),quality:"HD",speed:"FAST"},{id:"midjourney",name:"Midjourney Style",provider:"HYDRA",desc:"Artistic composition emulation.",icon:e.jsx(Ie,{size:16}),quality:"ART",speed:"SLOW"},{id:"any-dark",name:"Dark Mode",provider:"HYDRA",desc:"Moody, high contrast aesthetics.",icon:e.jsx(mt,{size:16}),quality:"HD",speed:"FAST"},{id:"turbo",name:"SDXL Turbo",provider:"HYDRA",desc:"Extreme speed. Draft quality.",icon:e.jsx(oe,{size:16}),quality:"STD",speed:"INSTANT"},{id:"gemini-2.5-flash-image",name:"Imagen 3 Fast",provider:"GOOGLE",desc:"Native Google generation.",icon:e.jsx(re,{size:16}),quality:"HD",speed:"FAST"},{id:"gemini-3-pro-image-preview",name:"Imagen 3 Pro",provider:"GOOGLE",desc:"Paid API. Highest coherence.",icon:e.jsx(re,{size:16}),quality:"ULTRA",speed:"SLOW"}],Xt=({isOpen:t,onClose:a,activeModelId:r,onSelectModel:s})=>t?e.jsxs("div",{className:"fixed inset-0 z-[2000] flex items-end md:items-center justify-center p-0 md:p-4 animate-fade-in font-sans",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md transition-opacity",onClick:a}),e.jsxs("div",{className:"relative z-10 w-full md:max-w-xl bg-[#09090b] rounded-t-[32px] md:rounded-[32px] border border-white/10 shadow-2xl overflow-hidden ring-1 ring-white/5 animate-slide-up",children:[e.jsxs("div",{className:"h-16 border-b border-white/5 bg-white/[0.02] flex items-center justify-between px-6 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-pink-500/10 flex items-center justify-center border border-pink-500/20 shadow-inner text-pink-500",children:e.jsx(Ae,{size:16})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-white leading-none",children:"VISUAL_ENGINE"}),e.jsx("p",{className:"text-[8px] text-neutral-500 font-mono uppercase tracking-widest mt-1",children:"Image Synthesis Module"})]})]}),e.jsx("button",{onClick:a,className:"w-8 h-8 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center text-neutral-400 hover:text-white transition-all border border-white/5 active:scale-95",children:e.jsx(ge,{size:16})})]}),e.jsx("div",{className:"p-4 space-y-2 max-h-[70vh] overflow-y-auto custom-scroll",children:Qt.map(l=>{const u=r===l.id;return e.jsxs("button",{onClick:()=>{s(l.id),a()},className:`w-full flex items-center gap-4 p-3.5 rounded-2xl border transition-all text-left group ${u?"bg-pink-500/10 border-pink-500/30 ring-1 ring-pink-500/20":"bg-white/5 border-white/5 hover:border-white/10 hover:bg-white/[0.07]"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 transition-colors ${u?"bg-pink-500 text-white shadow-lg shadow-pink-500/20":"bg-black/20 text-neutral-500 group-hover:text-pink-400"}`,children:l.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[e.jsx("span",{className:`text-sm font-black uppercase tracking-tight ${u?"text-white":"text-neutral-300 group-hover:text-white"}`,children:l.name}),u&&e.jsx(Be,{size:16,className:"text-pink-500"})]}),e.jsx("p",{className:"text-[9px] text-neutral-500 font-medium truncate",children:l.desc})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 opacity-60 shrink-0",children:[e.jsx("span",{className:"text-[7px] font-black bg-white/5 px-2 py-0.5 rounded text-neutral-400 border border-white/5",children:l.provider}),e.jsx("span",{className:"text-[7px] font-mono text-neutral-600",children:l.quality})]})]},l.id)})})]})]}):null,Jt=[{id:"Puck",label:"PUCK",desc:"Clear, Sassy",gender:"M"},{id:"Charon",label:"CHARON",desc:"Deep, Authoritative",gender:"M"},{id:"Kore",label:"KORE",desc:"Balanced, Calm",gender:"F"},{id:"Fenrir",label:"FENRIR",desc:"Deep, Stoic",gender:"M"},{id:"Aoede",label:"AOEDE",desc:"High, Formal",gender:"F"},{id:"Zephyr",label:"ZEPHYR",desc:"Soft, Empathetic",gender:"F"}],Zt=({currentVoice:t,onSelect:a,onClose:r})=>e.jsxs("div",{className:"absolute bottom-24 left-0 right-0 mx-6 bg-[#0a0a0b]/95 backdrop-blur-xl border border-white/10 rounded-2xl p-4 shadow-2xl animate-slide-up z-50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3 pb-3 border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{size:14,className:"text-[var(--accent-color)]"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:"SELECT_VOICE_MODEL"})]}),e.jsx("button",{onClick:r,className:"text-neutral-500 hover:text-white text-[9px] font-bold",children:"CLOSE"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Jt.map(s=>{const l=t===s.id;return e.jsxs("button",{onClick:()=>{a(s.id),r()},className:`
                                flex items-center justify-between p-3 rounded-xl border transition-all active:scale-95
                                ${l?"bg-[var(--accent-color)]/10 border-[var(--accent-color)]/30 shadow-[0_0_15px_rgba(var(--accent-rgb),0.1)]":"bg-white/5 border-transparent hover:bg-white/10"}
                            `,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-[10px] font-black ${l?"bg-[var(--accent-color)] text-black":"bg-black text-neutral-500"}`,children:s.id[0]}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:`text-[10px] font-bold uppercase ${l?"text-white":"text-neutral-300"}`,children:s.label}),e.jsx("div",{className:"text-[8px] text-neutral-500",children:s.desc})]})]}),l&&e.jsx(bt,{size:12,className:"text-[var(--accent-color)] animate-pulse"})]},s.id)})})]}),ea=({isOpen:t,status:a,personaMode:r,transcriptHistory:s,interimTranscript:l,onTerminate:u,onMinimize:c,analyser:k,activeTool:g})=>{const w=n.useRef(null),I=n.useRef(null),[E,C]=n.useState(!1),[D,d]=n.useState(0),[y,b]=n.useState(!1),[T,v]=n.useState(!1),{micMode:S,setMicMode:R,currentVoice:h,changeVoice:i,engine:f,setEngine:A}=at(),{isFeatureEnabled:z}=Te(),m=z("VISUAL_ENGINE");return n.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),n.useEffect(()=>{if(I.current){const j=I.current;j.scrollHeight-j.scrollTop-j.clientHeight<300&&j.scrollTo({top:j.scrollHeight,behavior:"smooth"})}},[s,l]),n.useEffect(()=>{if(!t||!k||!w.current)return;if(!m){d(128);return}const j=w.current,p=j.getContext("2d",{alpha:!0,desynchronized:!0});if(!p)return;let x;const _=k.frequencyBinCount,U=new Uint8Array(_),O=()=>{j.width=window.innerWidth,j.height=window.innerHeight};window.addEventListener("resize",O),O();const G=()=>{x=requestAnimationFrame(G),k.getByteFrequencyData(U);let $=0;for(let P=0;P<_;P++)$+=U[P];const F=$/_;d(F),b(F>10),p.fillStyle="rgba(0, 0, 0, 0.2)",p.fillRect(0,0,j.width,j.height);const J=j.width/2,te=j.height/2,B=Math.min(J,te)*.45,de=r==="hanisah"?25:190,Z=64,xe=Math.floor(_/Z);p.beginPath();for(let P=0;P<Z;P++){const H=U[P*xe]/256,ae=B*.6*H,V=P/Z*Math.PI*2,ue=J+Math.cos(V)*(B*.8+ae),he=te+Math.sin(V)*(B*.8+ae),o=J+Math.cos(V)*(B*.8),N=te+Math.sin(V)*(B*.8);p.strokeStyle=`hsla(${de}, 100%, ${60+H*40}%, ${Math.max(.3,H)})`,p.lineWidth=4,p.beginPath(),p.moveTo(o,N),p.lineTo(ue,he),p.stroke()}};return G(),()=>{cancelAnimationFrame(x),window.removeEventListener("resize",O)}},[t,k,r,m]),t?e.jsxs("div",{className:"fixed inset-0 z-[5000] bg-black flex flex-col animate-fade-in font-sans touch-none transform-gpu will-change-transform",children:[m&&e.jsx("canvas",{ref:w,className:"absolute inset-0 pointer-events-none z-0 transform-gpu"}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10 transition-transform duration-100 ease-out transform-gpu will-change-transform",style:{transform:`scale(${1+D/256*.15})`},children:[e.jsx("div",{className:`relative w-[280px] h-[280px] rounded-full blur-[80px] opacity-40 animate-pulse ${r==="hanisah"?"bg-orange-500":"bg-cyan-500"} ${a==="THINKING"?"animate-ping":""}`}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:`w-32 h-32 rounded-full border-2 border-white/20 flex items-center justify-center backdrop-blur-md shadow-[0_0_50px_rgba(255,255,255,0.1)] ${a==="ACTIVE"||a==="SPEAKING"?"animate-[spin_10s_linear_infinite]":""}`,children:r==="hanisah"?e.jsx(ce,{size:48,className:"text-white opacity-80"}):e.jsx(X,{size:48,className:"text-white opacity-80"})})})]}),e.jsxs("div",{className:"relative z-20 flex flex-col h-full justify-between pointer-events-none",children:[e.jsxs("div",{className:"p-6 pt-safe flex justify-between items-center pointer-events-auto",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:`px-4 py-2 rounded-full border bg-black/40 backdrop-blur-md flex items-center gap-2 ${a==="ERROR"?"border-red-500 text-red-500":"border-white/10 text-white"}`,children:[e.jsx(Ke,{size:16,className:a==="ACTIVE"||a==="SPEAKING"?"animate-pulse text-green-400":""}),e.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:a==="SPEAKING"?"TALKING":a})]}),e.jsxs("div",{className:"hidden md:flex bg-black/40 border border-white/10 rounded-full p-1",children:[e.jsxs("button",{onClick:()=>A("GEMINI_REALTIME"),className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-wider flex items-center gap-1 transition-all ${f==="GEMINI_REALTIME"?"bg-white text-black":"text-neutral-500 hover:text-white"}`,children:[e.jsx(oe,{size:10})," FAST"]}),e.jsxs("button",{onClick:()=>A("HYDRA_HYBRID"),className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-wider flex items-center gap-1 transition-all ${f==="HYDRA_HYBRID"?"bg-white text-black":"text-neutral-500 hover:text-white"}`,children:[e.jsx(Oe,{size:10})," STABLE"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:c,className:"w-12 h-12 rounded-full bg-white/10 hover:bg-white/20 text-white flex items-center justify-center transition-all border border-white/5 active:scale-90",title:"Minimize",children:e.jsx(pt,{size:20})}),e.jsx("button",{onClick:u,className:"w-12 h-12 rounded-full bg-white/10 hover:bg-red-500/20 text-white hover:text-red-500 flex items-center justify-center transition-all border border-white/5 active:scale-90",title:"End Call",children:e.jsx(ge,{size:20})})]})]}),e.jsxs("div",{ref:I,className:"flex-1 w-full max-w-2xl mx-auto px-6 overflow-y-auto no-scrollbar pointer-events-auto flex flex-col justify-end pb-8 space-y-4 mask-fade-top touch-pan-y transform-gpu",children:[s.map((j,p)=>e.jsx("div",{className:`flex ${j.role==="user"?"justify-end":"justify-start"} animate-slide-up`,children:e.jsx("div",{className:`max-w-[85%] px-5 py-3 rounded-2xl text-sm md:text-base font-medium leading-relaxed backdrop-blur-sm shadow-sm ${j.role==="user"?"bg-white/10 text-white/90 rounded-tr-none":"bg-black/60 text-accent/90 border border-accent/20 rounded-tl-none"}`,children:j.text})},p)),l&&e.jsx("div",{className:`flex ${l.role==="user"?"justify-end":"justify-start"} animate-slide-up`,children:e.jsxs("div",{className:`max-w-[85%] px-5 py-3 rounded-2xl text-base md:text-lg font-bold leading-relaxed backdrop-blur-md border shadow-lg ${l.role==="user"?"bg-white/20 text-white border-white/20 rounded-tr-none":"bg-accent/20 text-accent border-accent/40 rounded-tl-none"}`,children:[l.text,e.jsx("span",{className:"inline-block w-2 h-4 ml-1 align-middle bg-current animate-pulse"})]})}),g&&e.jsx("div",{className:"flex justify-center animate-fade-in",children:e.jsxs("div",{className:"px-6 py-2 bg-blue-600/90 text-white rounded-full text-xs font-black uppercase tracking-widest shadow-lg shadow-blue-500/30 flex items-center gap-2 animate-pulse border border-white/20",children:[e.jsx(re,{size:14})," EXECUTING: ",g.replace(/_/g," "),"..."]})}),!l&&!g&&(a==="ACTIVE"||a==="SPEAKING"||a==="THINKING")&&e.jsx("div",{className:"text-center text-white/40 text-xs font-mono uppercase tracking-widest animate-pulse mt-4",children:a==="THINKING"?"NEURAL ENGINE PROCESSING...":a==="SPEAKING"?"SPEAKING...":S==="ISOLATION"?"VOICE ISOLATION ACTIVE":"LISTENING..."})]}),e.jsx("div",{className:"px-6 pb-4 pointer-events-auto flex justify-center flex-col items-center gap-2",children:e.jsxs("div",{className:"bg-black/40 backdrop-blur-md border border-white/10 rounded-2xl p-2 flex items-center gap-1",children:[e.jsxs("button",{onClick:()=>v(!T),className:`p-3 rounded-xl transition-all flex flex-col items-center gap-1 w-20 ${T?"bg-white/10 text-white":"hover:bg-white/5 text-neutral-400"}`,children:[e.jsx(gt,{size:18}),e.jsx("span",{className:"text-[8px] font-black uppercase",children:h})]}),e.jsx("div",{className:"w-[1px] h-8 bg-white/10 mx-1"}),e.jsxs("button",{onClick:()=>A(f==="GEMINI_REALTIME"?"HYDRA_HYBRID":"GEMINI_REALTIME"),className:`p-3 rounded-xl transition-all flex flex-col items-center gap-1 w-20 ${f==="GEMINI_REALTIME"?"bg-purple-500/20 text-purple-400 border border-purple-500/30":"hover:bg-white/5 text-neutral-400"}`,children:[f==="GEMINI_REALTIME"?e.jsx(oe,{size:18}):e.jsx(Oe,{size:18}),e.jsx("span",{className:"text-[8px] font-black uppercase",children:f==="GEMINI_REALTIME"?"FAST":"STABLE"})]}),e.jsx("div",{className:"w-[1px] h-8 bg-white/10 mx-1"}),e.jsxs("button",{onClick:()=>{A(f==="GEMINI_REALTIME"?"HYDRA_HYBRID":"GEMINI_REALTIME"),setTimeout(()=>A(f),100)},className:"p-3 rounded-xl hover:bg-white/5 text-neutral-500 hover:text-red-400 flex flex-col items-center gap-1 w-16",title:"Emergency Reset",children:[e.jsx(ft,{size:18}),e.jsx("span",{className:"text-[8px] font-black uppercase",children:"RESET"})]})]})}),e.jsxs("div",{className:"p-8 pb-safe flex justify-center items-center gap-6 pointer-events-auto bg-gradient-to-t from-black via-black/80 to-transparent",children:[e.jsx("button",{onClick:()=>C(!E),className:`w-16 h-16 rounded-full flex items-center justify-center border transition-all active:scale-95 ${E?"bg-red-500/20 border-red-500 text-red-500":"bg-white/10 border-white/10 text-white hover:bg-white/20"}`,children:E?e.jsx(qe,{size:28}):e.jsx(Qe,{size:28})}),e.jsxs("button",{onClick:u,className:"h-16 px-10 rounded-full bg-red-600 hover:bg-red-500 text-white font-black text-xs tracking-[0.3em] uppercase shadow-lg shadow-red-900/50 hover:shadow-red-500/50 hover:scale-105 transition-all flex items-center gap-3 active:scale-95",children:[e.jsx(wt,{size:20,className:"animate-pulse"})," TERMINATE"]})]}),T&&e.jsx(Zt,{currentVoice:h,onSelect:i,onClose:()=>v(!1)})]}),e.jsx("style",{children:" .mask-fade-top { mask-image: linear-gradient(to bottom, transparent 0%, black 15%); -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 15%); } "})]}):null},se=4e3,Ge={TECH:["ðŸ¤–","âš¡","ðŸ§ ","ðŸ’¾","ðŸ“±","ðŸ’»","ðŸ”‹","ðŸ“¡","ðŸ’Ž","ðŸš€","ðŸ›¸","ðŸŒŒ","ðŸ”§","âš™ï¸","ðŸ”’","ðŸ›¡ï¸"],VIBE:["âœ¨","ðŸ”¥","ðŸ’€","ðŸ‘€","ðŸ’¯","ðŸ—¿","ðŸ·","ðŸŽ¨","ðŸŽ­","ðŸŽª","ðŸŽ²","ðŸŽ±","ðŸŽ¯","ðŸ”®","ðŸ§¬"],FACE:["ðŸ¤”","ðŸ¤¯","ðŸ˜Ž","ðŸ«¡","ðŸ« ","ðŸ¤–","ðŸ‘¾","ðŸ¤¡","ðŸ¤ ","ðŸ¤","ðŸ¤«","ðŸ§","ðŸ¥¹","ðŸ¤©","ðŸ˜¤"],HAND:["ðŸ‘","ðŸ‘Ž","ðŸ‘‹","ðŸ¤","ðŸ™Œ","ðŸ«¶","ðŸ«±ðŸ»â€ðŸ«²ðŸ¼","âœï¸","ðŸ¦¾","ðŸ’ª","ðŸ™","â˜ï¸","ðŸ¤Œ","ðŸ¤˜","ðŸ¤"],SIGN:["âœ…","âŒ","âš ï¸","ðŸš«","ðŸ”´","ðŸŸ¢","ðŸ”·","ðŸ”¶","â“","â—","â™»ï¸","âž¡ï¸","ðŸŽµ","ðŸ’²","â„¢ï¸"]},Le=n.memo(({input:t,setInput:a,isLoading:r,onSubmit:s,onStop:l,onNewChat:u,onFocusChange:c,aiName:k,isVaultSynced:g=!0,onToggleVaultSync:w,personaMode:I="hanisah",isVaultEnabled:E=!0,onTogglePersona:C,variant:D="standard",onPollinations:d,disableVisuals:y=!1})=>{const b=n.useRef(null),T=n.useRef(null),[v,S]=n.useState(!1),[R,h]=n.useState(!1),[i,f]=n.useState(null),[A,z]=n.useState(!1),[m,j]=n.useState(!1),[p,x]=n.useState(!1),[_,U]=n.useState("TECH"),O=n.useRef(null),G=Pt(),$=Me[G].chat,F=n.useMemo(()=>I==="hanisah"?[{label:"ðŸŽ¨ Buat Gambar",text:"Buatkan gambar "},{label:"ðŸ“ Ringkas",text:"Tolong ringkas ini: "},{label:"âœ… Buat Task",text:"Buat daftar tugas dari: "},{label:"ðŸ§  Brainstorm",text:"Bantu ide untuk "}]:[{label:"ðŸ§  Analyze",text:"Analyze this logically: "},{label:"ðŸž Debug",text:"Debug this code: "},{label:"ðŸ“‹ Extract Tasks",text:"Extract action items: "},{label:"ðŸ“ Summarize",text:"Summarize key points: "}],[I]);n.useEffect(()=>{if(b.current){const o=b.current;requestAnimationFrame(()=>{o.style.height="auto";const N=Math.min(o.scrollHeight,150);o.style.height=`${Math.max(24,N)}px`})}},[t,i]),n.useEffect(()=>()=>{O.current&&O.current.stop()},[]);const J=o=>{o.preventDefault();const N=o.clipboardData.getData("text/plain");if(b.current){const L=b.current.selectionStart,M=b.current.selectionEnd,Y=t.substring(0,L)+N+t.substring(M);a(Y),setTimeout(()=>{b.current&&(b.current.selectionStart=b.current.selectionEnd=L+N.length)},0)}j(!0),setTimeout(()=>j(!1),500)},te=o=>{if(b.current){const N=b.current.selectionStart,L=b.current.selectionEnd,M=t.substring(0,N)+o+t.substring(L);a(M),setTimeout(()=>{b.current&&(b.current.selectionStart=b.current.selectionEnd=N+o.length,b.current.focus())},0)}else a(N=>N+o)},B=n.useCallback(o=>{var L;if(o.stopPropagation(),K.logAction(q.CHAT_INPUT_MIC,Q.CHAT_SEND_MESSAGE,v?"STOP":"START"),v){(L=O.current)==null||L.stop(),S(!1);return}const N=window.SpeechRecognition||window.webkitSpeechRecognition;if(!N){alert("Fitur ini membutuhkan Google Chrome, Edge, atau Safari terbaru. Browser Anda tidak mendukung Web Speech API.");return}try{const M=new N;M.lang=Me[G].meta.code,M.continuous=!0,M.interimResults=!0,M.onstart=()=>{S(!0),navigator.vibrate&&navigator.vibrate(50)},M.onend=()=>{S(!1)},M.onresult=Y=>{let me="";for(let W=Y.resultIndex;W<Y.results.length;++W)Y.results[W].isFinal&&(me+=Y.results[W][0].transcript);me&&a(W=>{const je=W.length>0&&!W.endsWith(" ");return W+(je?" ":"")+me})},M.onerror=Y=>{console.error("Speech recognition error",Y.error),S(!1)},O.current=M,M.start()}catch(M){console.error("Mic initialization failed",M),alert("Gagal memulai mikrofon. Pastikan izin telah diberikan.")}},[G,v,a]),de=o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),r||ae())},Z=async o=>{if(!o.type.startsWith("image/")){alert("Only images supported.");return}try{const{base64:N,mimeType:L}=await Ft(o);f({file:o,preview:`data:${L};base64,${N}`,base64:N,mimeType:L})}catch(N){console.error("Image processing error",N),alert("Failed to process image. Please try another file.")}},xe=o=>{var N;(N=o.target.files)!=null&&N[0]&&Z(o.target.files[0]),o.target.value=""},P=()=>{var o;y||(K.logAction(q.CHAT_INPUT_ATTACH,Q.CHAT_SEND_MESSAGE,"OPEN_DIALOG"),(o=T.current)==null||o.click())},fe=()=>{K.logAction(q.CHAT_INPUT_NEW,Q.CHAT_NEW_SESSION,"CLICK"),u()},H=o=>{o.stopPropagation(),o.preventDefault(),l&&l()},ae=()=>{var N;if(v&&((N=O.current)==null||N.stop(),S(!1)),!t.trim()&&!i||r)return;if(t.length>se){alert(`Character limit exceeded (${se}). Please shorten your message.`);return}K.logAction(q.CHAT_INPUT_SEND,Q.CHAT_SEND_MESSAGE,"SUBMIT");const o=i?{data:i.base64,mimeType:i.mimeType}:void 0;s(void 0,o),f(null),b.current&&(b.current.style.height="auto")},V=t.length>se*.9?"text-red-500":t.length>se*.7?"text-amber-500":"text-neutral-400",ue=I==="hanisah"?"border-orange-500/50":"border-cyan-500/50",he=I==="hanisah"?"ring-orange-500/20":"ring-cyan-500/20";return e.jsxs("div",{className:"w-full relative group",style:{willChange:"transform"},children:[p&&e.jsx("div",{className:"fixed inset-0 z-20",onClick:()=>x(!1)}),p&&e.jsxs("div",{className:"absolute bottom-[110%] left-0 w-full sm:w-80 bg-white/95 dark:bg-[#0a0a0b]/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-[24px] shadow-2xl z-30 animate-slide-up flex flex-col overflow-hidden ring-1 ring-white/5",children:[e.jsx("div",{className:"flex p-1 border-b border-black/5 dark:border-white/5 overflow-x-auto no-scrollbar",children:Object.keys(Ge).map(o=>e.jsx("button",{onClick:()=>U(o),className:`
                              flex-1 py-2 text-[9px] font-black uppercase tracking-widest rounded-xl transition-all
                              ${_===o?"bg-black/5 dark:bg-white/10 text-black dark:text-white":"text-neutral-500 hover:text-black dark:hover:text-white"}
                          `,children:o},o))}),e.jsx("div",{className:"p-3 grid grid-cols-5 gap-1 max-h-48 overflow-y-auto custom-scroll",children:Ge[_].map(o=>e.jsx("button",{onClick:()=>te(o),className:"h-10 rounded-lg hover:bg-black/5 dark:hover:bg-white/10 text-xl flex items-center justify-center transition-transform hover:scale-110 active:scale-95",children:o},o))})]}),v&&e.jsx("div",{className:"absolute -top-20 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 animate-fade-in z-20 pointer-events-none",children:e.jsxs("div",{className:"bg-red-500/90 backdrop-blur-md text-white px-5 py-3 rounded-full text-[10px] font-black uppercase tracking-widest flex items-center gap-3 shadow-[0_0_30px_rgba(239,68,68,0.4)] border border-red-400",children:[e.jsxs("div",{className:"flex gap-1 items-center h-3",children:[e.jsx("div",{className:"w-1 bg-white animate-[music-bar_0.8s_ease-in-out_infinite]"}),e.jsx("div",{className:"w-1 bg-white animate-[music-bar_0.6s_ease-in-out_infinite]"}),e.jsx("div",{className:"w-1 bg-white animate-[music-bar_1.0s_ease-in-out_infinite]"})]}),$.listening]})}),m&&e.jsxs("div",{className:"absolute -top-10 right-0 text-[9px] font-black text-emerald-500 bg-emerald-500/10 border border-emerald-500/20 px-3 py-1 rounded-lg animate-fade-in flex items-center gap-2 backdrop-blur-sm",children:[e.jsx(jt,{size:12})," FORMAT_STRIPPED"]}),e.jsxs("div",{className:`
            w-full transition-all duration-300 ease-[cubic-bezier(0.23,1,0.32,1)]
            bg-white/80 dark:bg-[#0f0f11]/80 backdrop-blur-xl
            border 
            rounded-[36px] p-2 flex flex-col
            shadow-[0_20px_50px_-10px_rgba(0,0,0,0.1)] dark:shadow-[0_20px_50px_-10px_rgba(0,0,0,0.5)]
            ${v?"border-red-500/50 ring-4 ring-red-500/10 shadow-[0_0_30px_rgba(239,68,68,0.2)]":m?"border-emerald-500/50 ring-4 ring-emerald-500/10":R||A?`${ue} ring-4 ${he} shadow-[0_0_40px_rgba(var(--accent-rgb),0.1)] scale-[1.01]`:"border-black/5 dark:border-white/10 hover:border-black/10 dark:hover:border-white/20"}
        `,onDragOver:o=>{o.preventDefault(),z(!0)},onDragLeave:()=>z(!1),onDrop:o=>{var N;o.preventDefault(),z(!1),(N=o.dataTransfer.files)!=null&&N[0]&&Z(o.dataTransfer.files[0])},children:[i&&e.jsx("div",{className:"px-4 pt-4 pb-2 flex animate-slide-up",children:e.jsxs("div",{className:"relative group/preview inline-block",children:[e.jsx("img",{src:i.preview,alt:"Preview",className:"h-20 w-auto rounded-2xl border border-black/10 dark:border-white/10 shadow-lg object-cover ring-1 ring-white/10"}),e.jsx("button",{onClick:()=>f(null),"aria-label":"Remove Attachment",className:"absolute -top-2 -right-2 bg-black/80 backdrop-blur text-white rounded-full p-1.5 shadow-md hover:bg-red-500 transition-colors border border-white/20 active:scale-90",children:e.jsx(ge,{size:10})}),e.jsx("div",{className:"absolute bottom-1 right-1 px-1.5 py-0.5 rounded bg-black/50 backdrop-blur text-[8px] text-white font-mono uppercase border border-white/10",children:i.mimeType.split("/")[1]})]})}),e.jsxs("div",{className:"relative px-4 pt-3 pb-2 flex flex-col",children:[e.jsx("textarea",{ref:b,value:t,onChange:o=>a(o.target.value),onKeyDown:de,onPaste:J,onFocus:()=>{h(!0),c(!0)},onBlur:()=>{h(!1),c(!1)},placeholder:v?"":I==="hanisah"?"Chat with Hanisah...":"Query Stoic Logic...",className:"w-full bg-transparent text-base md:text-[15px] font-medium text-black dark:text-white placeholder:text-neutral-400 dark:placeholder:text-neutral-600 resize-none focus:outline-none max-h-60 custom-scroll leading-relaxed",rows:1,"aria-label":"Chat Input",disabled:r&&!l}),!t&&!i&&!v&&e.jsx("div",{className:`
                    flex gap-2 mt-2 
                    ${D==="hero"?"flex-wrap opacity-0 animate-fade-in":"overflow-x-auto no-scrollbar mask-fade-sides"}
                `,style:D==="hero"?{animationDelay:"200ms",opacity:1}:{},children:F.map((o,N)=>e.jsx("button",{onClick:()=>{var L;a(o.text),(L=b.current)==null||L.focus()},className:`
                                shrink-0 px-3 py-1.5 rounded-xl border transition-all text-[10px] font-medium whitespace-nowrap
                                bg-black/5 dark:bg-white/5 border-transparent 
                                hover:border-accent/30 hover:bg-accent/5 hover:text-accent
                                text-neutral-500 dark:text-neutral-400
                            `,children:o.label},N))})]}),e.jsxs("div",{className:"flex items-center justify-between px-3 pb-1.5 gap-2 border-t border-transparent transition-colors duration-300 mt-1",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{onClick:fe,"aria-label":"New Chat",className:"w-10 h-10 flex items-center justify-center rounded-full bg-zinc-100 dark:bg-white/5 text-neutral-500 hover:text-black dark:hover:text-white hover:bg-zinc-200 dark:hover:bg-white/10 transition-all active:scale-95 border border-transparent hover:border-black/5 dark:hover:border-white/5",title:$.newChat,children:e.jsx($e,{size:18,strokeWidth:2.5})}),e.jsx("button",{onClick:P,disabled:y,"aria-label":"Attach Image",className:`w-10 h-10 flex items-center justify-center rounded-full transition-all active:scale-95 border 
                        ${y?"opacity-30 cursor-not-allowed text-neutral-500 bg-transparent":i?"text-accent bg-accent/10 border-accent/20":"bg-zinc-100 dark:bg-white/5 border-transparent text-neutral-500 hover:text-blue-500 hover:bg-blue-500/10"}`,title:y?"Visuals Disabled":"Attach Image",children:e.jsx(Nt,{size:18,strokeWidth:2.5})}),e.jsx("input",{type:"file",ref:T,className:"hidden",onChange:xe,accept:"image/*"}),e.jsx("button",{onClick:()=>x(!p),className:`w-10 h-10 flex items-center justify-center rounded-full transition-all active:scale-95 border
                        ${p?"text-yellow-500 bg-yellow-500/10 border-yellow-500/20":"bg-zinc-100 dark:bg-white/5 border-transparent text-neutral-500 hover:text-yellow-500 hover:bg-yellow-500/10"}`,title:"Insert Emoji",children:e.jsx(vt,{size:18,strokeWidth:2.5})}),e.jsx("button",{onClick:()=>!y&&d&&d(),disabled:y,className:`w-10 h-10 flex items-center justify-center rounded-full transition-all active:scale-95 border 
                        ${y?"opacity-30 cursor-not-allowed text-neutral-500 bg-transparent":"bg-zinc-100 dark:bg-white/5 text-neutral-500 hover:text-pink-500 hover:bg-pink-500/10 border-transparent hover:border-pink-500/20"}`,title:y?"Visuals Disabled":"Generate with Flux",children:e.jsx(Ie,{size:18,strokeWidth:2.5})}),e.jsx("button",{onClick:w,disabled:!E,"aria-label":E?g?"Vault Sync Active":"Vault Sync Inactive":"Vault Disabled",className:`w-10 h-10 flex items-center justify-center rounded-full transition-all active:scale-95 border ${E?g?"text-purple-500 bg-purple-500/10 border-purple-500/20":"bg-zinc-100 dark:bg-white/5 border-transparent text-neutral-500 hover:text-purple-500 hover:bg-purple-500/10":"opacity-30"}`,title:E?"Vault Sync":"Vault Disabled",children:g?e.jsx(kt,{size:18,strokeWidth:2.5}):e.jsx(Ye,{size:18,strokeWidth:2.5})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`text-[9px] tech-mono font-bold transition-colors ${V} hidden sm:block ${t.length>0?"opacity-100":"opacity-0"}`,children:[t.length," ",e.jsxs("span",{className:"opacity-40",children:["/ ",se]})]}),e.jsx("button",{onClick:B,"aria-label":v?"Stop Dictation":"Start Dictation",className:`w-10 h-10 flex items-center justify-center rounded-full transition-all active:scale-95 border ${v?"bg-red-500 border-red-500 text-white shadow-lg animate-pulse":"bg-zinc-100 dark:bg-white/5 border-transparent text-neutral-500 hover:text-red-500 hover:bg-red-500/10"}`,title:"Real-time Dictation",children:v?e.jsx(qe,{size:18,strokeWidth:2.5}):e.jsx(Qe,{size:20,strokeWidth:2})}),r?e.jsx("button",{onClick:H,"aria-label":"Stop Generation",className:"w-14 h-14 rounded-[22px] flex items-center justify-center transition-all duration-300 bg-red-500 text-white shadow-lg shadow-red-500/30 hover:scale-105 active:scale-95 hover:shadow-red-500/50 animate-pulse border border-red-400",title:"Stop Generation",children:e.jsx(yt,{size:20,fill:"currentColor"})}):e.jsx("button",{onClick:()=>ae(),disabled:!t.trim()&&!i||t.length>se,"aria-label":"Send Message",className:`
                            w-14 h-14 rounded-[22px] flex items-center justify-center transition-all duration-300 border
                            ${(t.trim()||i)&&t.length<=se?"bg-black dark:bg-white text-white dark:text-black shadow-lg hover:scale-105 active:scale-95 hover:shadow-[0_0_30px_var(--accent-glow)] border-transparent":"bg-zinc-100 dark:bg-white/5 text-neutral-300 dark:text-neutral-600 cursor-not-allowed border-transparent"}
                        `,children:e.jsx(Et,{size:24,strokeWidth:3})})]})]})]}),e.jsx("style",{children:`
        .mask-fade-sides {
            mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
        }
        @keyframes music-bar {
            0%, 100% { height: 4px; }
            50% { height: 12px; }
        }
      `})]})}),ta=({metadata:t,isHydra:a,className:r=""})=>{if(!t||!t.provider&&!t.model)return null;const s=(t.provider||"UNKNOWN").toUpperCase(),l=(t.model||"Unknown Model").replace(/-/g," ").toUpperCase(),u=t.latency,c=()=>s.includes("GEMINI")||s.includes("GOOGLE")?e.jsx(re,{size:10,className:"text-blue-400"}):s.includes("GROQ")?e.jsx(oe,{size:10,className:"text-orange-400"}):s.includes("OPENAI")?e.jsx(Ue,{size:10,className:"text-green-400"}):s.includes("DEEPSEEK")?e.jsx(X,{size:10,className:"text-indigo-400"}):s.includes("MISTRAL")?e.jsx(Fe,{size:10,className:"text-yellow-400"}):s.includes("OPENROUTER")?e.jsx(It,{size:10,className:"text-purple-400"}):s.includes("HYDRA")?e.jsx(Ve,{size:10,className:"text-emerald-400"}):e.jsx(Se,{size:10,className:"text-neutral-400"}),k=()=>s.includes("GEMINI")?"bg-blue-500/5 border-blue-500/20 text-blue-300":s.includes("GROQ")?"bg-orange-500/5 border-orange-500/20 text-orange-300":s.includes("OPENAI")?"bg-green-500/5 border-green-500/20 text-green-300":s.includes("DEEPSEEK")?"bg-indigo-500/5 border-indigo-500/20 text-indigo-300":s.includes("HYDRA")||a?"bg-emerald-500/5 border-emerald-500/20 text-emerald-300":"bg-white/5 border-white/10 text-neutral-400";return e.jsxs("div",{className:`flex items-center flex-wrap gap-2 mt-3 select-none ${r}`,children:[e.jsxs("div",{className:`flex items-center gap-2 px-2.5 py-1 rounded-lg border backdrop-blur-md ${k()}`,children:[c(),e.jsxs("div",{className:"flex flex-col leading-none gap-0.5",children:[e.jsx("span",{className:"text-[8px] font-black uppercase tracking-wider opacity-80",children:a?"HYDRA_NODE":s}),e.jsx("span",{className:"text-[9px] font-bold font-mono tracking-tight max-w-[150px] truncate",children:l})]})]}),u&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg bg-white/5 border border-white/5 text-neutral-500",children:[e.jsx(Xe,{size:8}),e.jsxs("span",{className:"text-[8px] font-mono",children:[u,"ms"]})]}),a&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg bg-emerald-500/10 border border-emerald-500/20 text-emerald-500 animate-pulse",children:[e.jsx(Ce,{size:8}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest",children:"WINNER"})]}),e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg bg-white/5 border border-white/5 text-neutral-600",children:[e.jsx(St,{size:8}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-wider",children:"E2EE"})]})]})},aa=({status:t})=>e.jsxs("div",{className:"flex items-center gap-2.5 my-2 px-4 py-2.5 rounded-xl bg-amber-500/5 border border-amber-500/20 text-amber-500 w-fit animate-slide-up",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{size:14,className:"relative z-10"}),e.jsx("div",{className:"absolute inset-0 bg-amber-500 blur-md opacity-20 animate-pulse"})]}),e.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest flex items-center gap-2",children:[t,e.jsx(zt,{size:10,className:"animate-spin"})]})]}),sa=({content:t,isActive:a})=>{const[r,s]=n.useState(a);return n.useEffect(()=>{a&&s(!0)},[a]),e.jsxs("div",{className:`my-3 rounded-xl overflow-hidden border transition-all duration-500 w-full group/thought ${a?"border-cyan-500/40 bg-cyan-900/10 shadow-[0_0_25px_rgba(6,182,212,0.15)] ring-1 ring-cyan-500/20":"border-white/5 bg-black/20"}`,children:[e.jsxs("button",{onClick:()=>s(!r),className:"w-full flex items-center justify-between px-4 py-3 transition-colors cursor-pointer hover:bg-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${a?"bg-cyan-500 text-white animate-pulse shadow-[0_0_10px_rgba(6,182,212,0.5)]":"bg-white/10 text-neutral-400"}`,children:a?e.jsx(tt,{size:14,className:"animate-spin-slow"}):e.jsx(Rt,{size:14})}),e.jsx("div",{className:"flex flex-col items-start leading-none gap-1",children:e.jsx("span",{className:`text-[9px] font-black uppercase tracking-[0.2em] ${a?"text-cyan-400":"text-neutral-500"}`,children:a?"QUANTUM PROCESSING":"COGNITIVE TRACE"})})]}),e.jsx("div",{className:`p-1.5 rounded-lg transition-all ${r?"bg-cyan-500/20 text-cyan-400":"text-neutral-500"}`,children:e.jsx(_t,{size:14,className:`transition-transform duration-300 ${r?"rotate-180":""}`})})]}),e.jsx("div",{className:`transition-all duration-500 ease-[cubic-bezier(0.23,1,0.32,1)] overflow-hidden ${r?"max-h-[800px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"relative border-t border-white/5 bg-[#050505] p-4 pl-6 overflow-x-auto custom-scroll",children:e.jsx("pre",{className:"text-[10px] font-mono leading-[1.8] text-neutral-400 whitespace-pre-wrap font-medium tracking-tight",children:t})})})]})},ra=({chunks:t})=>!t||t.length===0?null:e.jsxs("div",{className:"mt-4 pt-3 border-t border-black/5 dark:border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2.5",children:[e.jsx("div",{className:"p-1 rounded bg-accent/10 text-accent",children:e.jsx(He,{size:10})}),e.jsx("span",{className:"text-[9px] font-black text-neutral-500 uppercase tracking-widest",children:"VERIFIED_SOURCES"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.map((a,r)=>{var u,c,k,g;const s=((u=a.web)==null?void 0:u.uri)||((c=a.maps)==null?void 0:c.uri),l=((k=a.web)==null?void 0:k.title)||((g=a.maps)==null?void 0:g.title)||"Reference";return s?e.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-white/5 rounded-lg border border-black/5 dark:border-white/5 hover:border-accent/30 hover:bg-accent/5 transition-all group max-w-full sm:max-w-[240px] active:scale-95",children:[e.jsxs("span",{className:"text-[9px] font-bold text-neutral-400 group-hover:text-accent transition-colors",children:["#",r+1]}),e.jsx("span",{className:"text-[9px] font-medium text-neutral-600 dark:text-neutral-300 truncate group-hover:text-accent transition-colors flex-1",children:l}),e.jsx(Dt,{size:8,className:"text-neutral-400 group-hover:text-accent opacity-0 group-hover:opacity-100 transition-opacity shrink-0"})]},r):null})})]}),na=({prompt:t,messageId:a,originalText:r,onUpdateMessage:s})=>{const[l,u]=n.useState("IDLE"),[c,k]=n.useState(null);n.useEffect(()=>{l==="IDLE"&&s&&a&&r&&g()},[]);const g=async()=>{u("GENERATING");try{const w=await $t(t);if(w)if(s&&a&&r){const I=/!!IMG:(.*?)!!/g,E=r.replace(I,`

![Generated Image](${w})

_Visual: ${t.slice(0,40)}..._`);s(a,E)}else k(w),u("DONE");else u("ERROR")}catch{u("ERROR")}};return e.jsxs("div",{className:"my-4 rounded-2xl overflow-hidden border border-accent/20 bg-black/40 max-w-sm shadow-[0_0_30px_-10px_rgba(var(--accent-rgb),0.1)] ring-1 ring-accent/10 relative",children:[l==="GENERATING"&&e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm z-10 flex flex-col items-center justify-center animate-fade-in",children:e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white animate-pulse",children:"DREAMING..."})}),e.jsx("div",{className:"p-3 border-b border-white/5 flex items-center justify-between bg-white/5",children:e.jsxs("span",{className:"text-[9px] font-black uppercase tracking-widest text-accent flex items-center gap-2",children:[e.jsx(Ae,{size:12})," VISUAL_SYNTHESIS"]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("p",{className:"text-[10px] font-mono text-neutral-400 mb-4 line-clamp-3 italic",children:['"',t,'"']}),l==="DONE"&&c?e.jsx("img",{src:c,alt:"Generated",className:"w-full rounded-xl shadow-lg border border-white/10"}):l!=="GENERATING"&&e.jsx("button",{onClick:g,className:"w-full py-3 bg-accent text-black font-black uppercase text-[10px] tracking-widest rounded-xl hover:scale-[1.02] active:scale-95 transition-all",children:l==="ERROR"?"RETRY":"START"})]})]})},ia=({src:t,alt:a})=>{const[r,s]=n.useState(!1);return t?e.jsx("div",{className:"my-4 relative group/img w-full max-w-md",children:e.jsxs("div",{className:`relative overflow-hidden rounded-2xl border border-white/10 shadow-lg transition-all cursor-pointer bg-black/20 ${r?"fixed inset-4 z-[9999] m-0 bg-black/95 object-contain flex items-center justify-center":"active:scale-[0.98]"}`,onClick:()=>s(!r),children:[e.jsx("img",{src:t,alt:a,className:`transition-opacity duration-500 ${r?"max-h-full max-w-full object-contain":"w-full h-auto max-h-[400px] object-cover"}`}),r&&e.jsx("button",{className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white backdrop-blur z-50",children:e.jsx(Je,{size:24,className:"rotate-45"})})]})}):null},la=({language:t,children:a})=>{const[r,s]=n.useState(!1),l=()=>{navigator.clipboard.writeText(String(a)),s(!0),setTimeout(()=>s(!1),2e3)};return e.jsxs("div",{className:"relative my-4 rounded-xl overflow-hidden border border-black/10 dark:border-white/10 bg-[#0e0e10]",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-white/5 border-b border-white/5 backdrop-blur-md",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-neutral-500",children:t||"TEXT"}),e.jsx("button",{onClick:l,className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg bg-white/5 hover:bg-white/10 transition-all",children:r?e.jsx(Ze,{size:12,className:"text-emerald-500"}):e.jsx(et,{size:12,className:"text-neutral-400"})})]}),e.jsx("div",{className:"p-4 overflow-x-auto custom-scroll bg-[#050505]",children:e.jsx("code",{className:"language-text block text-[11px] font-mono text-neutral-300 whitespace-pre",children:a})})]})},oa=({personaMode:t})=>e.jsxs("div",{className:"flex justify-start mb-6 px-1 animate-fade-in w-full",children:[e.jsx("div",{className:"flex flex-col gap-2 mr-3 shrink-0 mt-1",children:e.jsx("div",{className:`w-9 h-9 rounded-xl flex items-center justify-center shadow-lg border border-white/10 bg-white dark:bg-[#121214] ${t==="hanisah"?"text-orange-500":"text-cyan-500"}`,children:t==="hanisah"?e.jsx(ce,{size:16,fill:"currentColor"}):e.jsx(X,{size:16,fill:"currentColor"})})}),e.jsxs("div",{className:"bg-white dark:bg-[#0a0a0b] border border-black/5 dark:border-white/10 rounded-[24px] rounded-tl-sm px-5 py-4 flex items-center gap-1.5 shadow-sm h-[52px]",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-neutral-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-neutral-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-neutral-400 rounded-full animate-bounce"})]})]}),ca=n.memo(({msg:t,personaMode:a,isLoading:r,onUpdateMessage:s})=>{var T,v,S,R,h,i,f,A,z,m,j,p;const[l,u]=n.useState(!1),c=t.role==="model"||t.role==="assistant",k=!c,g=((T=t.metadata)==null?void 0:T.status)==="error",w=(v=t.metadata)==null?void 0:v.isRerouting,I=n.useMemo(()=>{const x=t.text;return typeof x=="string"?x:""},[t.text]),{thought:E,content:C,imgPrompt:D}=n.useMemo(()=>{var G;let x=I,_=null,U=null;if(x.includes("<think>"))if(x.includes("</think>")){const F=x.split("</think>");_=F[0].replace("<think>","").trim(),x=((G=F[1])==null?void 0:G.trim())||""}else _=x.replace("<think>","").trim(),x="";const O=x.match(/!!IMG:(.*?)!!/);return O&&(U=O[1],x=x.replace(O[0],"")),{thought:_,content:x,imgPrompt:U}},[I]),d=n.useMemo(()=>{var x;return(x=t.metadata)!=null&&x.createdAt?new Date(t.metadata.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},[(S=t.metadata)==null?void 0:S.createdAt]),y=()=>{C&&(navigator.clipboard.writeText(C),u(!0),setTimeout(()=>u(!1),2e3))};if(c&&!C&&!r&&!E&&!g&&!w&&!D)return null;const b=a==="hanisah"?"text-orange-500":"text-cyan-500";return e.jsxs("div",{className:`flex w-full mb-6 md:mb-8 ${c?"justify-start":"justify-end"} px-1 group/msg`,children:[c&&e.jsx("div",{className:"flex flex-col gap-2 mr-3 shrink-0 mt-1",children:e.jsx("div",{className:`w-9 h-9 rounded-xl flex items-center justify-center shadow-lg border border-white/10 bg-white dark:bg-[#121214] ${b}`,children:g?e.jsx(Ee,{size:16}):a==="hanisah"?e.jsx(ce,{size:16,fill:"currentColor"}):e.jsx(X,{size:16,fill:"currentColor"})})}),e.jsxs("div",{className:`flex flex-col max-w-[88%] sm:max-w-[80%] lg:max-w-[75%] min-w-0 ${c?"items-start":"items-end"}`,children:[e.jsxs("div",{className:`flex items-end gap-2 ${c?"flex-row":"flex-row-reverse"}`,children:[e.jsxs("div",{className:`relative px-5 py-4 overflow-hidden text-sm md:text-[15px] leading-7 font-sans tracking-wide shadow-sm break-words
                        ${c?"bg-white dark:bg-[#0a0a0b] text-black dark:text-neutral-200 rounded-[24px] rounded-tl-sm border border-black/5 dark:border-white/10":"bg-zinc-100 dark:bg-white/5 text-black dark:text-white rounded-[24px] rounded-tr-sm border border-black/5 dark:border-white/5"}
                    `,children:[w&&((R=t.metadata)==null?void 0:R.systemStatus)&&!C&&e.jsx(aa,{status:t.metadata.systemStatus}),E&&e.jsx(sa,{content:E,isActive:r&&!C}),C&&e.jsxs("div",{className:`prose dark:prose-invert prose-sm max-w-none break-words min-w-0 ${c?"prose-p:text-neutral-800 dark:prose-p:text-neutral-300":""} 
                                prose-blockquote:border-l-4 prose-blockquote:border-accent prose-blockquote:bg-accent/5 prose-blockquote:py-2 prose-blockquote:px-4 prose-blockquote:rounded-r-lg prose-blockquote:not-italic prose-blockquote:my-2
                            `,children:[e.jsx(At,{urlTransform:x=>x,components:{code({node:x,inline:_,className:U,children:O,...G}){const $=/language-(\w+)/.exec(U||"");return _?e.jsx("code",{className:"text-[12px] font-mono font-bold px-1.5 py-0.5 rounded border bg-black/5 dark:bg-white/10 border-black/5 dark:border-white/10",...G,children:O}):e.jsx(la,{language:$?$[1]:"text",children:O})},a:({children:x,href:_})=>e.jsxs("a",{href:_,target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline font-bold inline-flex items-center gap-1 bg-accent/5 px-1.5 rounded transition-colors border border-accent/10",children:[x," ",e.jsx(Je,{size:10,className:"-rotate-45"})]}),img:({src:x,alt:_})=>e.jsx(ia,{src:x,alt:_}),table:({children:x})=>e.jsx("div",{className:"overflow-x-auto my-4 border border-white/10 rounded-xl",children:e.jsx("table",{className:"min-w-full divide-y divide-white/10 text-[12px]",children:x})}),th:({children:x})=>e.jsx("th",{className:"px-4 py-2 bg-white/5 font-black uppercase tracking-wider text-left",children:x}),td:({children:x})=>e.jsx("td",{className:"px-4 py-2 border-t border-white/5",children:x}),blockquote:({children:x})=>e.jsx("blockquote",{className:"border-l-4 border-l-[var(--accent-color)] bg-[var(--accent-color)]/5 pl-4 py-3 my-2 rounded-r-xl border border-transparent border-l-4 shadow-sm",children:x})},children:C}),r&&c&&e.jsx("span",{className:"inline-block w-2 h-4 bg-accent align-middle ml-1 animate-[pulse_0.8s_ease-in-out_infinite]"})]}),D&&e.jsx(na,{prompt:D,messageId:t.id,originalText:I,onUpdateMessage:s}),r&&!C&&!E&&!D&&!w&&e.jsxs("div",{className:"flex items-center gap-2 py-1",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-neutral-400 animate-pulse",children:"Computing"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-1 h-1 bg-accent rounded-full animate-bounce"}),e.jsx("div",{className:"w-1 h-1 bg-accent rounded-full animate-bounce delay-75"}),e.jsx("div",{className:"w-1 h-1 bg-accent rounded-full animate-bounce delay-150"})]})]}),c&&((h=t.metadata)==null?void 0:h.groundingChunks)&&e.jsx(ra,{chunks:t.metadata.groundingChunks})]}),c&&C&&e.jsx("button",{onClick:y,className:"p-2 rounded-full hover:bg-black/5 dark:hover:bg-white/10 text-neutral-400 hover:text-accent transition-all shrink-0 self-center",title:"Copy Text",children:l?e.jsx(Ze,{size:14,className:"text-emerald-500"}):e.jsx(et,{size:14})})]}),e.jsxs("div",{className:`flex items-center gap-3 mt-1.5 px-2 select-none ${c?"justify-start":"justify-end"}`,children:[c&&e.jsx(ta,{metadata:t.metadata,isHydra:!!(((i=t.metadata)==null?void 0:i.model)==="auto-best"||(A=(f=t.metadata)==null?void 0:f.model)!=null&&A.includes("HYDRA")),className:"mt-0"}),e.jsxs("div",{className:"flex items-center gap-1.5 opacity-70",children:[e.jsx("span",{className:"text-[9px] font-mono text-neutral-400",children:d}),k&&e.jsxs(e.Fragment,{children:[(((z=t.metadata)==null?void 0:z.status)==="success"||!((m=t.metadata)!=null&&m.status))&&e.jsx(Tt,{size:12,className:"text-neutral-400"}),((j=t.metadata)==null?void 0:j.status)==="loading"&&e.jsx(Xe,{size:12,className:"animate-pulse text-neutral-400"}),((p=t.metadata)==null?void 0:p.status)==="error"&&e.jsx(Ee,{size:12,className:"text-red-500"})]})]})]})]})]})},(t,a)=>{const r=k=>{const g=k.text;return typeof g=="string"?g:""},s=r(t.msg),l=r(a.msg),u=JSON.stringify(t.msg.metadata),c=JSON.stringify(a.msg.metadata);return s===l&&t.isLoading===a.isLoading&&u===c}),da=(t,a)=>a.id||t,xa=n.memo(({messages:t,personaMode:a,isLoading:r,messagesEndRef:s,onUpdateMessage:l})=>{const u=n.useRef(null),c=n.useMemo(()=>{if(r){const w=t[t.length-1];if(w&&w.role==="user")return[...t,{id:"loading-indicator",role:"model",text:"",isLoader:!0}]}return t},[t,r]),k=n.useMemo(()=>({personaMode:a,isLoading:r,onUpdateMessage:l}),[a,r,l]),g=n.useMemo(()=>()=>e.jsx("div",{className:"h-4",ref:s}),[s]);return e.jsx("div",{className:"h-full w-full min-h-0 flex-1 flex flex-col relative bg-transparent",style:{overscrollBehavior:"contain"},children:e.jsx(Ct,{ref:u,style:{height:"100%",width:"100%"},data:c,context:k,initialTopMostItemIndex:Math.max(0,c.length-1),followOutput:"auto",alignToBottom:!0,atBottomThreshold:60,components:{Footer:g},overscan:1e3,computeItemKey:da,itemContent:(w,I,E)=>{if(I.isLoader)return e.jsx("div",{style:{willChange:"transform"},className:"pb-2",children:e.jsx(oa,{personaMode:E.personaMode})});const C=w===c.length-1;return e.jsx("div",{className:"py-2 px-2 md:px-4 w-full transform-gpu",style:{willChange:"transform"},children:e.jsx(ca,{msg:I,personaMode:E.personaMode,isLoading:E.isLoading&&C,onUpdateMessage:E.onUpdateMessage},I.id||w)})}})})}),ua=ne.memo(({mode:t,onToggle:a})=>e.jsxs("button",{onClick:a,className:`group relative flex items-center gap-2 px-3 py-1.5 rounded-xl border transition-all duration-300 ${t==="hanisah"?"bg-orange-500/10 border-orange-500/20 text-orange-600 dark:text-orange-500":"bg-cyan-500/10 border-cyan-500/20 text-cyan-600 dark:text-cyan-500"}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t==="hanisah"?"bg-orange-500":"bg-cyan-500"} animate-pulse`}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:t==="hanisah"?"HANISAH":"STOIC"}),e.jsx("div",{className:"w-[1px] h-3 bg-current opacity-20 mx-1"}),t==="hanisah"?e.jsx(ce,{size:12,strokeWidth:2.5}):e.jsx(X,{size:12,strokeWidth:2.5})]})),ye=ne.memo(({icon:t,label:a,desc:r,onClick:s,accent:l="text-neutral-400 group-hover:text-accent",delay:u=0})=>e.jsxs("button",{onClick:s,style:{animationDelay:`${u}ms`},className:"relative overflow-hidden group bg-white/60 dark:bg-white/[0.03] backdrop-blur-sm border border-black/5 dark:border-white/5 rounded-[20px] p-4 text-left transition-all duration-300 ease-out hover:bg-white dark:hover:bg-white/[0.08] hover:border-accent/20 hover:shadow-lg hover:-translate-y-0.5 active:scale-[0.98] flex items-center gap-4 h-full animate-slide-up sheen",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl bg-black/5 dark:bg-white/5 flex items-center justify-center transition-all duration-300 group-hover:scale-110 ${l} border border-black/5 dark:border-white/5`,children:ne.cloneElement(t,{size:18,strokeWidth:2})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-neutral-600 dark:text-neutral-300 group-hover:text-black dark:group-hover:text-white transition-colors truncate",children:a}),e.jsx("p",{className:"text-[10px] text-neutral-400 font-medium truncate opacity-80 group-hover:opacity-100 transition-opacity",children:r})]})]})),ha=({chatLogic:t})=>{var _e,De;const[a,r]=n.useState(!1),[s,l]=n.useState(!1),[u,c]=n.useState(!1),[k,g]=n.useState(!1),[w,I]=n.useState(!1),[E,C]=n.useState(!1),{isFeatureEnabled:D}=Te(),d=D("LIVE_LINK"),{shouldShowNav:y}=Ht(),b=y&&window.innerWidth<768,{threads:T,setThreads:v,activeThread:S,activeThreadId:R,setActiveThreadId:h,input:i,setInput:f,isLoading:A,activeModel:z,personaMode:m,handleNewChat:j,sendMessage:p,stopGeneration:x,togglePinThread:_,deleteThread:U,renameThread:O,isVaultSynced:G,setIsVaultSynced:$,isVaultConfigEnabled:F,setIsLiveModeActive:J,setGlobalModelId:te,generateWithPollinations:B,imageModelId:de,setImageModelId:Z,isThreadsLoaded:xe}=t,P=n.useRef(null),fe=n.useRef(!0),H=m==="stoic",ae=m==="hanisah"?"bg-gradient-to-b from-orange-500/[0.03] to-transparent":"bg-gradient-to-b from-cyan-500/[0.03] to-transparent",{isLive:V,isMinimized:ue,status:he,transcript:o,interimTranscript:N,startSession:L,stopSession:M,toggleMinimize:Y,analyser:me,activeTool:W}=at();n.useEffect(()=>{J&&J(V)},[V,J]);const je=n.useCallback((ee="smooth")=>{P.current&&(setTimeout(()=>{var ie;(ie=P.current)==null||ie.scrollIntoView({behavior:ee,block:"end"})},50),fe.current=!0,C(!1))},[]);if(!xe)return e.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center gap-4 bg-white dark:bg-[#0a0a0b] animate-fade-in",children:[e.jsx(Ot,{size:32,className:"animate-spin text-[var(--accent-color)]"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-neutral-500 animate-pulse",children:"RESTORING_MEMORY_BANKS..."})]});const ze=n.useCallback(()=>{!F||w||(G?$(!1):g(!0))},[G,w,$,F]),Ne=async()=>{const ee=m==="hanisah"?"stoic":"hanisah";I(!0),await j(ee),setTimeout(()=>I(!1),300)},st=n.useCallback((ee,ie)=>{v(pe=>pe.map(we=>we.id===R?{...we,messages:we.messages.map(ve=>ve.id===ee?{...ve,text:ie}:ve),updated:new Date().toISOString()}:we))},[R,v]),Re=!A&&(!R||!S||(((_e=S.messages)==null?void 0:_e.length)||0)<=1),be=(z==null?void 0:z.id)==="auto-best";return e.jsxs("div",{className:`h-full w-full relative bg-noise flex flex-col ${ae} overflow-hidden`,style:{overscrollBehavior:"contain"},children:[e.jsx(Ut,{isOpen:k,onClose:()=>g(!1),onSuccess:()=>$(!0)}),e.jsx("header",{className:"shrink-0 z-50 flex justify-center pt-[env(safe-area-inset-top)] px-4 w-full",children:e.jsxs("div",{className:`mt-2 backdrop-blur-2xl border rounded-[20px] p-1.5 flex items-center justify-between gap-1 shadow-sm ring-1 transition-all duration-500 sheen ${be?"bg-black/80 dark:bg-zinc-900/90 border-emerald-500/30 ring-emerald-500/20 shadow-emerald-500/5":"bg-white/80 dark:bg-[#0f0f11]/90 border-black/5 dark:border-white/10 ring-black/5 dark:ring-white/5"}`,children:[e.jsxs("button",{className:"flex items-center gap-2 group py-1.5 px-3 rounded-xl transition-all cursor-pointer hover:bg-black/5 dark:hover:bg-white/5 active:scale-95",onClick:()=>{K.logAction(q.CHAT_BTN_MODEL_PICKER,Q.CHAT_SELECT_MODEL,"OPEN"),r(!0)},children:[e.jsx("div",{className:`w-5 h-5 rounded-lg flex items-center justify-center shrink-0 ${be?"text-emerald-500":"text-neutral-500 group-hover:text-black dark:group-hover:text-white"}`,children:be?e.jsx(tt,{size:14,className:"animate-pulse"}):e.jsx(oe,{size:14})}),e.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest leading-none ${be?"text-emerald-500":"text-neutral-600 dark:text-neutral-400 group-hover:text-black dark:group-hover:text-white"}`,children:be?"HYDRA":((De=z==null?void 0:z.name)==null?void 0:De.split(" ")[0])||"MODEL"})]}),e.jsx("div",{className:"h-4 w-[1px] bg-black/5 dark:bg-white/10 mx-1"}),e.jsx(ua,{mode:m,onToggle:Ne}),e.jsx("div",{className:"h-4 w-[1px] bg-black/5 dark:bg-white/10 mx-1"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>!H&&l(!0),disabled:H,className:`w-8 h-8 rounded-lg transition-all flex items-center justify-center active:scale-90 group ${H?"opacity-50 cursor-not-allowed bg-black/5":"text-pink-500 hover:bg-pink-500/10"}`,children:H?e.jsx(We,{size:14}):e.jsx(Ae,{size:16,strokeWidth:2})}),e.jsx("button",{onClick:()=>{K.logAction(q.CHAT_BTN_HISTORY,Q.CHAT_LOAD_HISTORY,"OPEN"),c(!0)},className:"w-8 h-8 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 text-neutral-400 hover:text-black dark:hover:text-white transition-all flex items-center justify-center active:scale-90 group",children:e.jsx(Pe,{size:16,strokeWidth:2})}),e.jsx("button",{onClick:()=>{d&&(V?M():L(m))},className:`w-8 h-8 rounded-lg transition-all flex items-center justify-center active:scale-95 ${d?V?"bg-red-500 text-white animate-pulse":"text-neutral-400 hover:text-red-500 hover:bg-red-500/10":"opacity-30 cursor-not-allowed"}`,disabled:!d,children:e.jsx(Ke,{size:16,strokeWidth:2})})]})]})}),e.jsx("div",{className:"flex-1 min-h-0 relative w-full max-w-[900px] mx-auto pt-2",children:Re?e.jsxs("div",{className:"flex flex-col h-full justify-center items-center w-full pb-20 animate-fade-in overflow-y-auto custom-scroll px-4",children:[e.jsxs("div",{className:"text-center mb-10 space-y-4",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 rounded-[24px] mb-2 ${m==="hanisah"?"bg-orange-500/10 text-orange-500":"bg-cyan-500/10 text-cyan-500"}`,children:m==="hanisah"?e.jsx(ce,{size:32}):e.jsx(X,{size:32})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-4xl md:text-6xl font-black italic tracking-tighter text-black dark:text-white uppercase leading-none",children:m}),e.jsx("p",{className:"text-[10px] font-mono text-neutral-400 uppercase tracking-[0.3em]",children:m==="hanisah"?"HYPER-INTUITIVE PARTNER":"QUANTUM LOGIC KERNEL"})]})]}),e.jsx("div",{className:"w-full max-w-2xl mx-auto animate-slide-up relative z-20",style:{animationDelay:"100ms"},children:e.jsx(Le,{input:i,setInput:f,isLoading:A,onSubmit:p,onStop:x,onNewChat:()=>j(m),onFocusChange:()=>{},aiName:m.toUpperCase(),isVaultSynced:G,onToggleVaultSync:ze,personaMode:m,isVaultEnabled:F,onTogglePersona:Ne,variant:"hero",onPollinations:B,disableVisuals:H})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 w-full max-w-2xl mx-auto mt-8 opacity-80",children:[H?e.jsx(ye,{icon:e.jsx(X,{}),label:"FIRST PRINCIPLES",desc:"Deconstruct complex problems.",onClick:()=>{K.logAction(q.CHAT_SUGGESTION_CARD,Q.CHAT_SEND_MESSAGE,"LOGIC"),f("Analyze this problem using First Principles thinking: [Insert Problem]")},accent:"text-cyan-500 group-hover:text-cyan-600",delay:150}):e.jsx(ye,{icon:e.jsx(re,{}),label:"GENERATE VISUAL",desc:"Create high-fidelity images.",onClick:()=>{K.logAction(q.CHAT_SUGGESTION_CARD,Q.CHAT_SEND_MESSAGE,"GEN_IMG"),f("Generate a futuristic cyberpunk city with neon lights.")},accent:"text-pink-500 group-hover:text-pink-600",delay:150}),e.jsx(ye,{icon:e.jsx(Mt,{}),label:"CODE AUDIT",desc:"Debug & optimize algorithms.",onClick:()=>{K.logAction(q.CHAT_SUGGESTION_CARD,Q.CHAT_SEND_MESSAGE,"CODE_AUDIT"),f("Analyze this algorithm for complexity: [Paste Code]")},accent:"text-emerald-500 group-hover:text-emerald-600",delay:200})]})]}):e.jsx(xa,{messages:(S==null?void 0:S.messages)||[],personaMode:m,isLoading:A,messagesEndRef:P,onUpdateMessage:st},R||"new")}),!Re&&e.jsx("div",{className:`shrink-0 z-50 w-full flex justify-center pb-[calc(env(safe-area-inset-bottom)+1rem)] px-4 md:px-0 transition-all duration-300 ${b?"mb-16":""}`,children:e.jsxs("div",{className:"w-full max-w-[900px] pointer-events-auto relative",children:[E&&e.jsx("button",{onClick:()=>je(),className:"absolute -top-16 right-0 z-20 w-10 h-10 rounded-full bg-white dark:bg-[#0a0a0b] shadow-xl border border-black/10 dark:border-white/10 flex items-center justify-center text-accent animate-bounce",children:e.jsx(Gt,{size:18,strokeWidth:2.5})}),e.jsx(Le,{input:i,setInput:f,isLoading:A,onSubmit:p,onStop:x,onNewChat:()=>j(m),onFocusChange:()=>{},aiName:m.toUpperCase(),isVaultSynced:G,onToggleVaultSync:ze,personaMode:m,isVaultEnabled:F,onTogglePersona:Ne,variant:"standard",onPollinations:B,disableVisuals:H})]})}),e.jsx(Kt,{isOpen:a,onClose:()=>r(!1),activeModelId:(z==null?void 0:z.id)||"",onSelectModel:ee=>{te(ee),R&&v(ie=>ie.map(pe=>pe.id===R?{...pe,model_id:ee}:pe)),r(!1)}}),e.jsx(Xt,{isOpen:s,onClose:()=>l(!1),activeModelId:de||"hydra",onSelectModel:Z}),e.jsx(Bt,{isOpen:u,onClose:()=>c(!1),threads:T,activeThreadId:R,onSelectThread:h,onDeleteThread:U,onRenameThread:O,onTogglePin:_,onNewChat:()=>j(m)}),e.jsx(ea,{isOpen:V&&!ue,status:he,personaMode:m,transcriptHistory:o,interimTranscript:N,onTerminate:M,onMinimize:Y,activeTool:W,analyser:me})]})},ja=ne.memo(ha);export{ja as default};
